'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _requestPromiseNative=require('request-promise-native');var _requestPromiseNative2=_interopRequireDefault(_requestPromiseNative);var _config=require('./config');var _util=require('./util');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var song=function song(id){var option=(0,_util.deepCopy)(_config.globalOption);var url=_config.origin+'/api/song/detail?ids=%5B'+id+'%5d';var method='GET';Object.assign(option,{url:url,method:method});return(0,_requestPromiseNative2.default)(option).then(function(body){return JSON.parse(body).songs}).catch(function(e){return e})};var search=function search(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var onlySong=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var limit=arguments.length>3&&arguments[3]!==undefined?arguments[3]:3;var offset=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var option=(0,_util.deepCopy)(_config.globalOption);var url=_config.origin+'/api/search/suggest/web';var form={s:name,type:type,limit:limit,offset:offset};var method='POST';Object.assign(option,{url:url,form:form,method:method});return(0,_requestPromiseNative2.default)(option).then(function(body){var info=JSON.parse(body);var data=void 0;if(onlySong){data=info.result.songs}else{data={songs:info.result.songs,mvs:info.result.mvs}}return data}).catch(function(e){return e})};var lrc=function lrc(id){var lv=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var option=(0,_util.deepCopy)(_config.globalOption);var url=_config.origin+'/api/song/lyric?lv='+lv+'&id='+id;var method='GET';Object.assign(option,{url:url,method:method});return(0,_requestPromiseNative2.default)(option).then(function(body){return JSON.parse(body).lrc.lyric}).catch(function(e){return e})};var playLists=function playLists(id){var option=(0,_util.deepCopy)(_config.globalOption);var url=_config.origin+'/api/playlist/detail?id='+id;var method='GET';Object.assign(option,{url:url,method:method});return(0,_requestPromiseNative2.default)(option).then(function(body){return JSON.parse(body).result}).catch(function(e){return e})};var artistAlbums=function artistAlbums(id){var limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;var offset=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var option=(0,_util.deepCopy)(_config.globalOption);var url=_config.origin+'/api/artist/albums/'+id+'?offset='+offset+'&limit='+limit;var method='GET';Object.assign(option,{url:url,method:method});return(0,_requestPromiseNative2.default)(option).then(function(body){return JSON.parse(body)}).catch(function(e){return e})};var albums=function albums(id){var option=(0,_util.deepCopy)(_config.globalOption);var url=_config.origin+'/api/album/'+id;var method='GET';Object.assign(option,{url:url,method:method});return(0,_requestPromiseNative2.default)(option).then(function(body){return JSON.parse(body).album}).catch(function(e){return e})};exports.default={search:search,song:song,lrc:lrc,playLists:playLists,artistAlbums:artistAlbums,albums:albums};